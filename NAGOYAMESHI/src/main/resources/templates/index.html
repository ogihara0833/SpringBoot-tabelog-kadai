<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <div th:replace="~{fragment :: meta}"></div>
  <div th:replace="~{fragment :: styles}"></div>
  <title>NAGOYAMESHI</title>
  <link th:href="@{/css/slider.css}" rel="stylesheet">
</head>
<body>
  <div class="nagoyameshi-wrapper">

    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <div th:replace="~{fragment :: header}"></div>

    <main>
      <!-- ‚úÖ „É≠„Ç∞„Ç§„É≥ÈÄöÁü• -->
      <div th:if="${param.loggedIn}" class="alert alert-info text-center mt-4">„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åó„Åü„ÄÇ</div>
      <div th:if="${param.loggedOut}" class="alert alert-info text-center mt-4">„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü„ÄÇ</div>
      <div th:if="${successMessage}" class="alert alert-success text-center mt-4">
        <span th:text="${successMessage}"></span>
      </div>

      <!-- ‚úÖ „Éí„Éº„É≠„Éº„Çπ„É©„Ç§„ÉÄ„Éº -->
      <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">

          <!-- üîÑ „Çπ„É©„Ç§„ÉÄ„ÉºÁîªÂÉè -->
          <div class="carousel-item active">
            <img src="/images/izakaya_menu2.jpg" class="d-block w-100 hero-image" alt="„Åä„Åô„Åô„ÇÅ„Ç∞„É´„É°1">
          </div>
          <div class="carousel-item">
            <img src="/images/top_image2.jpg" class="d-block w-100 hero-image" alt="„Åä„Åô„Åô„ÇÅ„Ç∞„É´„É°2">
          </div>
          <div class="carousel-item">
            <img src="/images/ramen_menyu1.jpg" class="d-block w-100 hero-image" alt="„Åä„Åô„Åô„ÇÅ„Ç∞„É´„É°3">
          </div>

          <!-- üîç Ê§úÁ¥¢„Éï„Ç©„Éº„É†Ôºö„Çπ„É©„Ç§„ÉÄ„Éº‰∏äÈÉ®„Å´Èáç„Å≠„Çã -->
          <div class="carousel-caption d-flex flex-column justify-content-center align-items-center">
            <h1 class="display-5 fw-bold text-shadow">NAGOYAMESHI</h1>
            <form method="get" th:action="@{/restaurants}" class="hero-search-form-container">
              <div class="row g-3">
                <div class="col-md-3">
                  <input type="text" class="form-control" name="keyword" placeholder="„Ç≠„Éº„ÉØ„Éº„Éâ" th:value="${keyword}">
                </div>
                <div class="col-md-3">
                  <select class="form-select" name="categoryId">
                    <option value="">„Ç´„ÉÜ„Ç¥„É™</option>
                    <option th:each="cat : ${categoryList}" th:value="${cat.id}" th:text="${cat.name}" th:selected="${cat.id == categoryId}"></option>
                  </select>
                </div>
                <div class="col-md-2">
                  <input type="number" class="form-control" name="maxBudget" placeholder="‰∫àÁÆó‰∏äÈôêÔºàÂÜÜÔºâ" th:value="${maxBudget}">
                </div>
                <div class="col-md-2">
                  <input type="text" class="form-control" name="area" placeholder="„Ç®„É™„Ç¢" th:value="${area}">
                </div>
                <div class="col-md-2">
                  <button type="submit" class="btn btn-primary w-100">Ê§úÁ¥¢„ÉªÂ∫óËàó‰∏ÄË¶ß</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
		
	  <!-- üèÜ Ê≥®ÁõÆÂ∫óËàó -->
	  <div class="container pt-5 pb-5 nagoyameshi-container">
	    <h2 class="text-center mb-4 text-warning">Ê≥®ÁõÆÂ∫óËàó</h2>

	    <div class="row row-cols-lg-5 row-cols-2 g-3 mb-5">
	      <div class="col" th:each="restaurant : ${featuredRestaurants}">
	        <a th:href="@{/restaurants/{id}(id=${restaurant.id})}" class="link-dark nagoyameshi-card-link">
	          <div class="card h-100 position-relative">

	            <!-- ‚≠ê „Éê„ÉÉ„Ç∏‰ªò„ÅçÂ∫óËàóÁîªÂÉè -->
	            <img th:if="${restaurant.imageName != null}" th:src="@{/storage/{img}(img=${restaurant.imageName})}"
	                 class="card-img-top nagoyameshi-vertical-card-image" alt="Â∫óËàóÁîªÂÉè">
	            <img th:unless="${restaurant.imageName != null}" th:src="@{/images/noImage.png}"
	                 class="card-img-top nagoyameshi-vertical-card-image" alt="NO IMAGE">

	            <!-- ‚≠ê Ê≥®ÁõÆ„Éê„ÉÉ„Ç∏Ë°®Á§∫ -->
	            <span class="badge bg-warning text-dark position-absolute top-0 start-0 m-2">‚òÖÊ≥®ÁõÆ</span>

	            <!-- Â∫óËàóÊÉÖÂ†± -->
	            <div class="card-body">
	              <h3 class="card-title" th:text="${restaurant.name}"></h3>
	              <p class="card-text mb-1">
	                <small class="text-muted" th:text="${restaurant.address}"></small>
	              </p>
	              <p class="card-text" th:text="${restaurant.category.name}"></p>
	              <p class="card-text">
	                <span th:if="${restaurant.lunchPriceMin != null}"
	                      th:text="'ÊòºÔºö' + ${#numbers.formatInteger(restaurant.lunchPriceMin, 1, 'COMMA')} + 'ÂÜÜ„Äú'"></span>
	                <span th:if="${restaurant.lunchPriceMin == null and restaurant.dinnerPriceMin != null}"
	                      th:text="'Â§úÔºö' + ${#numbers.formatInteger(restaurant.dinnerPriceMin, 1, 'COMMA')} + 'ÂÜÜ„Äú'"></span>
	              </p>
	            </div>
	          </div>
	        </a>
	      </div>
	    </div>
		<!-- üÜï Â∫óËàó‰∏ÄË¶ß„Éú„Çø„É≥ -->
		 <div class="text-center mt-4">
		    <a th:href="@{/restaurants}" class="btn btn-outline-secondary">Â∫óËàó‰∏ÄË¶ß„ÇíË¶ã„Çã</a>
		 </div>
      </div>
    </main>

    <!-- „Éï„ÉÉ„Çø„Éº -->
    <div th:replace="~{fragment :: footer}"></div>
  </div>

  <div th:replace="~{fragment :: scripts}"></div>

  <!-- ‚úÖ „Çπ„É©„Ç§„ÉÄ„ÉºË®≠ÂÆö -->
  <script>
    const myCarousel = document.querySelector('#heroCarousel');
    const carousel = new bootstrap.Carousel(myCarousel, {
      interval: 3000,
      ride: 'carousel',
      pause: false
    });
  </script>
</body>
</html>
