<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${restaurant.name + '｜レビュー編集'}">レビュー編集</title>
  <div th:replace="~{fragment :: meta}"></div>
  <div th:replace="~{fragment :: styles}"></div>
</head>
<body>
<div class="nagoyameshi-wrapper">
  <div th:replace="~{fragment :: header}"></div>
  <main>
    <div class="container pt-4 pb-5 nagoyameshi-container">
      <div class="row justify-content-center">
        <div class="col-xl-8">

          <h2 class="mb-4 text-center" th:text="${restaurant.name + 'のレビュー編集'}">レビュー編集</h2>

		  <form method="post"
		        th:action="@{/restaurants/{restaurantId}/reviews/{reviewId}/update(restaurantId=${restaurant.id}, reviewId=${review.id})}"
		        th:object="${reviewEditForm}">

		    <!-- ⚠️ バリデーションエラー -->
		    <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger mb-3">
		      <ul>
		        <li th:each="err : ${#fields.errors('*')}" th:text="${err}">エラーメッセージ</li>
		      </ul>
		    </div>

		    <!-- ⭐ 評価スコア -->
		    <div class="mb-3">
		      <label for="score" class="form-label fw-bold">評価（1〜5）</label>
		      <select th:field="*{score}" class="form-select">
		        <option value="5">★★★★★</option>
		        <option value="4">★★★★☆</option>
		        <option value="3">★★★☆☆</option>
		        <option value="2">★★☆☆☆</option>
		        <option value="1">★☆☆☆☆</option>
		      </select>
		    </div>

		    <!-- 📝 コメント -->
		    <div class="mb-3">
		      <label for="content" class="form-label fw-bold">コメント（300文字以内）</label>
		      <textarea th:field="*{content}" class="form-control" rows="4" placeholder="修正したい内容を記入してください"></textarea>
		    </div>

		    <!-- ✅ 更新ボタン -->
		    <div class="text-center">
		      <button type="submit" class="btn btn-primary">レビューを更新する</button>
		    </div>
		  </form>
		  
          <!-- 🔙 戻るリンク -->
          <div class="text-center mt-4">
            <a class="btn btn-secondary" th:href="@{/restaurants/{id}(id=${restaurant.id})}">店舗詳細に戻る</a>
          </div>

        </div>
      </div>
    </div>
  </main>
  <div th:replace="~{fragment :: footer}"></div>
</div>
<div th:replace="~{fragment :: scripts}"></div>
</body>
</html>
